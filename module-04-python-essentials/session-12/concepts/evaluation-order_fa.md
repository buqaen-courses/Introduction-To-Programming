# ترتیب ارزیابی در پایتون

## آنچه خواهید آموخت
- چه عملیاتی اول انجام می‌شود وقتی چند عملیات دارید
- چگونه از پرانتز برای کنترل ترتیب استفاده کنید
- نحوه خواندن و نوشتن عبارات پیچیده

---

## چرا ترتیب ارزیابی اهمیت دارد؟

وقتی یک عبارت پیچیده مانند `2 + 3 * 4` دارید، پایتون باید تصمیم بگیرد کدام عملیات را **اول** انجام دهد.

### تشبیه: دستورالعمل آشپزی

تصور کنید یک دستورالعمل دارید که می‌گوید:
- "۱ قاشق چایخوری شکر اضافه کنید"
- "با ۲ پیمانه شیر مخلوط کنید"
- "بپزید به مدت ۱۰ دقیقه"

**ترتیب مهم است!** اگر ابتدا بپزید و بعد مخلوط کنید، غذای متفاوتی خواهید داشت.

در برنامه‌نویسی هم همینطور است:
```python
result = 2 + 3 * 4       # این ۱۴ است یا ۲۰؟
```

پاسخ: **۱۴** (چون ضرب قبل از جمع انجام می‌شود)

---

## قواعد اولویت عملگرها (PEMDAS)

پایتون از ترتیب خاصی برای ارزیابی عبارات استفاده می‌کند. می‌توانید آن را با **PEMDAS** به خاطر بسپارید:

| حرف | معنی | عملگرها |
|--------|-------|---------|
| **P** | Parentheses (پرانتز) | `()` |
| **E** | Exponents (توان) | `**` |
| **M** | Multiplication (ضرب) | `*`, `/`, `//`, `%` |
| **D** | Division (تقسیم) | (همان بالا) |
| **A** | Addition (جمع) | `+`, `-` |
| **S** | Subtraction (تفریق) | (همان بالا) |

### دسته‌بندی دقیق‌تر در پایتون

این لیست از **بالا به پایین** است (بالاتر = اولویت بیشتر):

1. **پرانتز** `()`
2. **توان** `**`
3. **ضرب، تقسیم، باقیمانده** `*`, `/`, `//`, `%` (از چپ به راست)
4. **جمع و تفریق** `+`, `-` (از چپ به راست)
5. **مقایسه‌ها** `==`, `!=`, `<`, `>`, `<=`, `>=` (از چپ به راست)
6. **منطقی** `not`, `and`, `or`

---

## مثال‌های ترتیب ارزیابی

### مثال ۱: جمع و ضرب

```python
result = 2 + 3 * 4
# ابتدا 3 * 4 = 12
# سپس 2 + 12 = 14
print(result)            # 14
```

**بدون پرانتز اشتباه:**
```python
result = (2 + 3) * 4     # پرانتز ابتدا
# ابتدا 2 + 3 = 5
# سپس 5 * 4 = 20
print(result)            # 20
```

### مثال ۲: توان و ضرب

```python
result = 2 * 3 ** 2
# ابتدا 3 ** 2 = 9
# سپس 2 * 9 = 18
print(result)            # 18

result = (2 * 3) ** 2
# ابتدا 2 * 3 = 6
# سپس 6 ** 2 = 36
print(result)            # 36
```

### مثال ۳: تقسیم و تفریق

```python
result = 10 - 6 / 2
# ابتدا 6 / 2 = 3.0
# سپس 10 - 3.0 = 7.0
print(result)            # 7.0

result = (10 - 6) / 2
# ابتدا 10 - 6 = 4
# سپس 4 / 2 = 2.0
print(result)            # 2.0
```

### مثال ۴: چند عملگر یک اولویت

```python
result = 10 / 2 * 3
# از چپ به راست: 10 / 2 = 5.0
# سپس 5.0 * 3 = 15.0
print(result)            # 15.0

result = 10 - 5 + 3
# از چپ به راست: 10 - 5 = 5
# سپس 5 + 3 = 8
print(result)            # 8
```

---

## استفاده از پرانتز برای وضوح

### چه زمانی از پرانتز استفاده کنیم

**همیشه از پرانتز استفاده کنید** اگر:
1. می‌خواهید ترتیب را تغییر دهید
2. عبارت پیچیده است و می‌خواهید واضح‌تر باشد
3. نمی‌دانید ترتیب چیست (بی‌خیال شوید و پرانتز بگذارید!)

### مثال: بدون پرانتز (مبهم)

```python
# این کدام است؟
result = 100 + 200 / 10 * 5

# حدس بزنید... حالا تست کنید
print(result)            # 200.0

# در واقع اینطوری است:
# 200 / 10 = 20.0
# 20.0 * 5 = 100.0
# 100 + 100.0 = 200.0
```

### مثال: با پرانتز (واضح)

```python
# چه می‌خواستید؟

# گزینه ۱: (100 + 200) / 10 * 5
result = (100 + 200) / 10 * 5
print(result)            # 150.0

# گزینه ۲: 100 + (200 / 10) * 5
result = 100 + (200 / 10) * 5
print(result)            # 200.0

# گزینه ۳: 100 + 200 / (10 * 5)
result = 100 + 200 / (10 * 5)
print(result)            # 104.0
```

**نکته:** پرانتزها کد شما را **خواناتر** می‌کنند!

---

## اولویت عملگرهای منطقی

### ترتیب: not، سپس and، سپس or

```python
result = True or False and False
# ابتدا: False and False = False
# سپس: True or False = True
print(result)            # True
```

با پرانتز واضح‌تر:
```python
# مثال بالا معادل:
result = True or (False and False)

# اگر می‌خواستید:
result = (True or False) and False
print(result)            # False
```

### مثال‌های پیچیده‌تر

```python
x, y, z = True, False, True

# بدون پرانتز
result = x and y or z
# x and y = False
# False or z = True
print(result)            # True

# معادل با پرانتز
result = (x and y) or z  # True

# اگر می‌خواستید ترتیب دیگری
result = x and (y or z)  # True (چون y or z = True)
```

---

## ارزیابی از چپ به راست یا راست به چپ؟

### بیشتر عملگرها: چپ به راست

```python
result = 10 - 5 - 2
# (10 - 5) - 2 = 5 - 2 = 3
print(result)            # 3

result = 8 / 4 / 2
# (8 / 4) / 2 = 2.0 / 2 = 1.0
print(result)            # 1.0
```

### توان: راست به چپ

```python
result = 2 ** 3 ** 2
# 2 ** (3 ** 2) = 2 ** 9 = 512
# نه: (2 ** 3) ** 2 = 8 ** 2 = 64
print(result)            # 512
```

---

## عبارات پیچیده در عمل

### مثال: محاسبه میانگین

```python
# بدون پرانتز (اشتباه!)
score1, score2, score3 = 85, 90, 95
average = score1 + score2 + score3 / 3
# score3 / 3 = 31.67
# 85 + 90 + 31.67 = 206.67 (اشتباه!)
print(average)           # 206.67

# با پرانتز (صحیح)
average = (score1 + score2 + score3) / 3
print(average)           # 90.0
```

### مثال: محاسبه قیمت با تخفیف

```python
price = 100
discount = 0.20
tax_rate = 0.08

# بدون پرانتز (مبهم)
final = price - price * discount + price * tax_rate

# با پرانتز (واضح)
subtotal = price * (1 - discount)
tax = subtotal * tax_rate
final = subtotal + tax
print(final)             # 86.4
```

### مثال: بررسی محدوده

```python
age = 25

# بررسی اینکه آیا سن بین ۱۸ و ۶۵ است
is_adult = 18 <= age <= 65
# معادل: (18 <= age) and (age <= 65)
print(is_adult)          # True
```

---

## اشتباهات رایج

### اشتباه ۱: تقسیم قبل از ضرب

```python
# ❌ اشتباه رایج
result = 10 / 2 * 5      # این ۲۵ است یا ۱؟
print(result)            # 25.0 (از چپ به راست)

# اگر می‌خواستید ۱
result = 10 / (2 * 5)
print(result)            # 1.0
```

### اشتباه ۲: فراموش کردن توان راست به چپ

```python
# ❌ غافلگیرکننده
result = 2 ** 3 ** 2     # ۵۱۲ یا ۶۴؟
print(result)            # 512 (راست به چپ)

# برای ۶۴
result = (2 ** 3) ** 2
print(result)            # 64
```

### اشتباه ۳: منطقی بدون پرانتز

```python
# ❌ مبهم
result = True or False and False

# ✅ واضح
result = True or (False and False)  # True
# یا
result = (True or False) and False  # False
```

### اشتباه ۴: منفی کردن اعداد

```python
# ❌ غافلگیرکننده
result = -3 ** 2         # این -۹ است یا ۹؟
print(result)            # -9 (توان قبل از منفی)

# برای ۹
result = (-3) ** 2
print(result)            # 9
```

---

## خودتان امتحان کنید: تمرین‌ها

### تمرین ۱: پیش‌بینی نتایج

بدون اجرای کد، نتایج را پیش‌بینی کنید:

```python
result1 = 5 + 3 * 2
result2 = (5 + 3) * 2
result3 = 10 / 2 + 3
result4 = 10 / (2 + 3)
result5 = 2 ** 3 ** 2
result6 = (2 ** 3) ** 2
result7 = True or False and False
result8 = (True or False) and False
```

### تمرین ۲: افزودن پرانتز

پرانتز اضافه کنید تا نتایج مورد نظر را بگیرید:

```python
# باید ۲۵ شود (نه ۱۷)
result = 5 + 3 * 4

# باید ۱.۲۵ شود (نه ۶.۰)
result = 10 / 4 + 2

# باید ۲ شود (نه ۱۴)
result = 8 - 6 + 4
```

### تمرین ۳: کد میانگین

کد زیر اصلاح شود تا میانگین صحیح محاسبه شود:

```python
a, b, c, d = 80, 90, 85, 95
average = a + b + c + d / 4  # اصلاح شود!
```

### تمرین ۴: عبارات پیچیده

این را با پرانتز واضح‌تر بنویسید:

```python
result = 100 - 25 * 2 + 15 / 3 * 4
```

---

## مرجع سریع

### ترتیب اولویت (بالاتر = اول می‌شود)

```
۱. ()          - پرانتز
۲. **          - توان (راست به چپ)
۳. *, /, //, % - ضرب، تقسیم، باقیمانده (چپ به راست)
۴. +, -        - جمع، تفریق (چپ به راست)
۵. ==, !=, <, >, <=, >= - مقایسه (چپ به راست)
۶. not         - منفی منطقی
۷. and         - و منطقی
۸. or          - یا منطقی
```

### قاعده طلایی

```
وقتی شک داشتید، پرانتز بگذارید!
```

---

## نکات کلیدی

۱. **PEMDAS** را به خاطر بسپارید: پرانتز، توان، ضرب/تقسیم، جمع/تفریق
۲. **توان راست به چپ** ارزیابی می‌شود: `2 ** 3 ** 2` = `2 ** 9` = ۵۱۲
۳. **بقیه چپ به راست** ارزیابی می‌شوند
۴. **همیشه از پرانتز استفاده کنید** برای وضوح - حتی اگر لازم نیست
۵. **ترتیب منطقی:** not، سپس and، سپس or

---

## گام بعدی چیست؟

حالا که می‌دانید ترتیب ارزیابی چیست، بیایید درباره گرفتن ورودی و نمایش خروجی یاد بگیریم:
- **ورودی/خروجی** - تعامل با کاربر
