# مجموعه‌ها و تاپل‌ها در پایتون

## آنچه خواهید آموخت
- چگونه از تاپل‌ها (تغییرناپذیر) استفاده کنید
- چگونه از مجموعه‌ها (یکتا) استفاده کنید
- تفاوت بین انواع داده
- چه موقع از هر کدام استفاده کنید

---

## تاپل‌ها (Tuples)

### تاپل چیست؟

یک **تاپل** مانند یک لیست است، اما **تغییرناپذیر** - پس از ایجاد نمی‌توان تغییر داد.

```python
# تاپل نمونه
coordinates = (10, 20)
person = ("Alice", 25, "Engineer")
single = ("only",)   # ⚠️ کاما برای تاپل تک‌عنصری لازم است!
```

### ایجاد تاپل‌ها

```python
# با پرانتز
point = (3, 4)

# بدون پرانتز (تاپل packing)
values = 1, 2, 3   # (1, 2, 3)

# از لیست
from_list = tuple([1, 2, 3])   # (1, 2, 3)

# تاپل تک‌عنصری (کاما ضروری!)
one = ("hello",)   # تاپل
not_tuple = ("hello")   # فقط یک رشته!
```

### دسترسی به آیتم‌ها

```python
person = ("Alice", 25, "Engineer")

print(person[0])    # Alice
print(person[1])    # 25
print(person[-1])   # Engineer

# برش
print(person[:2])   # ('Alice', 25)
```

### تاپل‌ها تغییرناپذیرند!

```python
coordinates = (10, 20)

# ❌ نمی‌توانید تغییر دهید!
coordinates[0] = 15   # TypeError!

# ✅ اما می‌توانید تاپل جدید بسازید
coordinates = (15, 20)

# ✅ اگر آیتم تغییرپذیر باشد، آن را می‌توانید تغییر دهید
mutable_tuple = ([1, 2], [3, 4])
mutable_tuple[0].append(5)   # ([1, 2, 5], [3, 4]) - لیست داخلی تغییر کرد!
```

### آنپکینگ (Unpacking)

```python
# استخراج به متغیرها
point = (3, 4)
x, y = point
print(x)   # 3
print(y)   # 4

# با asterisk
first, *rest = (1, 2, 3, 4, 5)
print(first)  # 1
print(rest)   # [2, 3, 4, 5]

# نادیده گرفتن
name, _, age = ("Alice", "ignored", 25)
```

### استفاده به عنوان کلید دیکشنری

```python
# تاپل‌ها تغییرناپذیرند، پس می‌توانند کلید باشند
locations = {
    (0, 0): "Origin",
    (3, 4): "Point A",
    (5, 12): "Point B"
}

print(locations[(3, 4)])   # Point A
```

---

## مجموعه‌ها (Sets)

### مجموعه چیست؟

یک **مجموعه** مجموعه‌ای از **عناصر یکتا** است:
- **یکتا** - تکراری‌ها ندارد
- **نامرتب** - ترتیبی ندارد
- **تغییرپذیر** - می‌توانید اضافه/حذف کنید

```python
# مجموعه نمونه
fruits = {"apple", "banana", "cherry"}
numbers = {1, 2, 3, 4, 5}
```

### ایجاد مجموعه‌ها

```python
# با آکولادها (لیست خالی نمی‌تواند!)
fruits = {"apple", "banana", "cherry"}

# خالی - باید با set()
empty = set()   # نه {} - آن دیکشنری خالی است!

# از لیست (تکراری‌ها حذف می‌شوند!)
unique = set([1, 2, 2, 3, 3, 3])   # {1, 2, 3}

# از رشته
chars = set("hello")   # {'h', 'e', 'l', 'o'}
```

### عملیات مجموعه‌ها

```python
set1 = {1, 2, 3, 4}
set2 = {3, 4, 5, 6}

# اتحاد (Union) - همه عناصر
print(set1 | set2)       # {1, 2, 3, 4, 5, 6}
print(set1.union(set2))  # {1, 2, 3, 4, 5, 6}

# اشتراک (Intersection) - عناصر مشترک
print(set1 & set2)            # {3, 4}
print(set1.intersection(set2)) # {3, 4}

# تفاضل (Difference) - در اولی ولی نه در دومی
print(set1 - set2)            # {1, 2}
print(set1.difference(set2))  # {1, 2}

# تفاضل متقارن (Symmetric Difference) - در یکی ولی نه هر دو
print(set1 ^ set2)                     # {1, 2, 5, 6}
print(set1.symmetric_difference(set2))  # {1, 2, 5, 6}
```

### تغییر مجموعه‌ها

```python
fruits = {"apple", "banana"}

# اضافه کردن
fruits.add("cherry")        # {'apple', 'banana', 'cherry'}

# اضافه کردن چندین
fruits.update(["date", "elderberry"])

# حذف
fruits.remove("banana")     # خطا اگر وجود نداشته باشد
fruits.discard("banana")    # بدون خطا اگر وجود نداشته باشد

# pop - حذف و برگرداندن تصادفی
item = fruits.pop()

# clear
fruits.clear()              # set()
```

### عملیات رابطه‌ای

```python
a = {1, 2, 3}
b = {1, 2}
c = {4, 5}

# زیرمجموعه (Subset)
print(b <= a)   # True - b زیرمجموعه a است
print(b.issubset(a))   # True

# ابرمجموعه (Superset)
print(a >= b)   # True - a ابرمجموعه b است
print(a.issuperset(b))   # True

# جدا (Disjoint) - هیچ اشتراکی ندارند
print(a.isdisjoint(c))   # True
```

---

## مقایسه انواع داده

| ویژگی | لیست | تاپل | مجموعه | دیکشنری |
|-------|------|------|--------|---------|
| **مرتب** | ✅ | ✅ | ❌ | ✅ (3.7+) |
| **تغییرپذیر** | ✅ | ❌ | ✅ | ✅ |
| **یکتا** | ❌ | ❌ | ✅ | کلیدها ✅ |
| **ساختار** | [1, 2, 3] | (1, 2, 3) | {1, 2, 3} | {"a": 1} |
| **دسترسی** | ایندکس | ایندکس | عضویت | کلید |
| **کاربرد** | مجموعه | ثابت‌ها | یکتا | key-value |

---

## چه موقع از کدام استفاده کنیم؟

### از تاپل استفاده کنید وقتی:
- داده نباید تغییر کند (مختصات، رنگ‌ها)
- می‌خواهید از آن به عنوان کلید دیکشنری استفاده کنید
- می‌خواهید تضمین کنید داده ثابت است
- بازگرداندن چندین مقدار از تابع

```python
# مختصات GPS
def get_location():
    return (40.7128, -74.0060)   # نیویورک

# رنگ RGB
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
```

### از مجموعه استفاده کنید وقتی:
- تکراری‌ها مهم نیستند
- فقط وجود مهم است (نه ترتیب)
- عضویت سریع می‌خواهید
- عملیات ریاضی مجموعه لازم دارید

```python
# حذف تکراری‌ها
emails = set(email_list)

# بررسی سریع عضویت
if user_id in banned_users:   # O(1) در مجموعه
    print("Access denied")

# مقایسه دو لیست
common = set(list1) & set(list2)   # عناصر مشترک
```

### از لیست استفاده کنید وقتی:
- ترتیب مهم است
- نیاز به تغییر دارید
- ایندکس‌بندی لازم دارید
- تکراری‌ها OK هستند

### از دیکشنری استفاده کنید وقتی:
- key-value mapping لازم دارید
- جستجو بر اساس کلید می‌خواهید
- ساختار داده پیچیده نیاز دارید

---

## مجموعه‌تفسیری و تاپل‌تفسیری

### مجموعه‌تفسیری

```python
# فقط اعداد زوج
squares = {x ** 2 for x in range(10) if x % 2 == 0}
# {0, 4, 16, 36, 64}

# از لیست با تکراری‌ها
unique_lengths = {len(word) for word in ["apple", "banana", "cherry", "pie"]}
# {3, 5, 6}
```

### تاپل‌تفسیری

```python
# تاپل‌تفسیری وجود ندارد، اما می‌توانید از generator استفاده کنید
tuple_from_gen = tuple(x ** 2 for x in range(5))
# (0, 1, 4, 9, 16)
```

---

## اشتباهات رایج

### اشتباه 1: تاپل تک‌عنصری بدون کاما

```python
# ❌ این یک رشته است، نه تاپل!
not_tuple = ("hello")
print(type(not_tuple))   # <class 'str'>

# ✅ این تاپل است
tuple_one = ("hello",)
print(type(tuple_one))   # <class 'tuple'>
```

### اشتباه 2: فراموش کردن اینکه مجموعه‌ها نامرتب‌اند

```python
# ❌ فرض بر ترتیب
my_set = {3, 1, 2}
print(my_set[0])   # TypeError!

# ✅ تبدیل به لیست اگر ترتیب مهم است
my_list = sorted(my_set)   # [1, 2, 3]
```

### اشتباه 3: استفاده از {} برای مجموعه خالی

```python
# ❌ این دیکشنری خالی است، نه مجموعه!
empty = {}
print(type(empty))   # <class 'dict'>

# ✅ از set() استفاده کنید
empty_set = set()
print(type(empty_set))   # <class 'set'>
```

---

## خودتان امتحان کنید: تمرین‌ها

### تمرین 1: حذف تکراری‌ها با حفظ ترتیب

تابعی بنویسید که تکراری‌ها را حذف کند اما ترتیب اولیه را حفظ کند.

<details>
<summary>برای دیدن پاسخ کلیک کنید</summary>

```python
def unique_ordered(items):
    seen = set()
    result = []
    for item in items:
        if item not in seen:
            seen.add(item)
            result.append(item)
    return result

# یا با dict (Python 3.7+)
def unique_ordered_fast(items):
    return list(dict.fromkeys(items))

# آزمایش
print(unique_ordered([1, 2, 2, 3, 3, 3, 4]))   # [1, 2, 3, 4]
```

</details>

### تمرین 2: یافتن کلمات مشترک

دو متن دریافت کنید و کلمات مشترک را پیدا کنید.

<details>
<summary>برای دیدن پاسخ کلیک کنید</summary>

```python
def common_words(text1, text2):
    words1 = set(text1.lower().split())
    words2 = set(text2.lower().split())
    return words1 & words2

# آزمایش
text1 = "Python is a programming language"
text2 = "Python is great for data science"
print(common_words(text1, text2))   # {'python', 'is', 'a'}
```

</details>

### تمرین 3: سواپ با تاپل

با استفاده از unpacking، دو متغیر را بدون متغیر کمکی جابه‌جا کنید.

<details>
<summary>برای دیدن پاسخ کلیک کنید</summary>

```python
a = 5
b = 10

# جابه‌جایی با تاپل unpacking
a, b = b, a

print(f"a = {a}, b = {b}")   # a = 10, b = 5
```

</details>

---

## مرجع سریع

### تاپل

| عملیات | کد | توضیح |
|--------|-----|-------|
| ایجاد | `(1, 2, 3)` | تاپل |
| تک‌عنصری | `(1,)` | کاما ضروری! |
| دسترسی | `t[0]` | ایندکس |
| آنپک | `a, b = t` | استخراج |
| طول | `len(t)` | تعداد |

### مجموعه

| عملیات | کد | توضیح |
|--------|-----|-------|
| ایجاد | `{1, 2, 3}` | مجموعه |
| خالی | `set()` | نه `{}`! |
| اضافه | `s.add(x)` | اضافه کردن |
| حذف | `s.remove(x)` | حذف |
| اتحاد | `s1 \| s2` | همه |
| اشتراک | `s1 & s2` | مشترک |
| تفاضل | `s1 - s2` | فقط در s1 |

---

## نکات کلیدی

1. **تاپل‌ها تغییرناپذیرند** - نمی‌توانید تغییر دهید
2. **مجموعه‌ها یکتا و نامرتب‌اند** - تکراری ندارند، ترتیب ندارند
3. **کاما برای تاپل تک‌عنصری** - `(x,)` نه `(x)`
4. **`set()` برای خالی** - `{}` دیکشنری است
5. **مجموعه‌ها عضویت سریع دارند** - `O(1)` برای `in`
6. **تاپل‌ها کلید خوبی‌اند** - تغییرناپذیرند
7. **عملیات ریاضی مجموعه** - `| & - ^` برای union, intersection, difference, symmetric difference

---

## خلاصه Module 04

تبریک! شما اکنون درک خوبی از مفاهیم پایه پایتون دارید:

- **Session 10-11:** متغیرها، انواع داده، و تبدیل‌ها
- **Session 12:** عملگرها، اولویت، ورودی/خروجی
- **Session 13:** منطق بولی و عبارات شرطی
- **Session 14:** حلقه‌ها (for، while) و کنترل آن‌ها
- **Session 15:** رشته‌ها و پردازش متن
- **Session 16:** لیست‌ها، دیکشنری‌ها، مجموعه‌ها، و تاپل‌ها

آماده‌اید پروژه‌های بزرگ‌تر بسازید!
