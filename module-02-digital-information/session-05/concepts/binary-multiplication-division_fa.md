# ضرب و تقسیم دودویی: حساب پیشرفته دودویی

## مقدمه: ساختن روی جمع و تفریق

دقیقاً مانند ریاضی دهدهی، ضرب دودویی جمع مکرر است و تقسیم تفریق مکرر است. اما چون فقط با ۰ و ۱ کار می‌کنیم، فرآیند واقعاً ساده‌تر است!

---

## ضرب دودویی

### جدول ضرب (خیلی ساده‌تر از دهدهی!)

| × | ۰ | ۱ |
|---|---|---|
| **۰** | ۰ | ۰ |
| **۱** | ۰ | ۱ |

**همین!** چهار قاعده به جای ۱۰۰.

### نحوه کار

ضرب دودویی از همان الگوی ضرب دهدهی پیروی می‌کند:
۱. هر رقم عدد دوم را در عدد اول ضرب کنید
۲. هر نتیجه جزئی را بر اساس موقعیت به چپ شیفت دهید
۳. همه نتایج جزئی را جمع کنید

### مثال ۱: ۵ × ۳

```
دهدهی: ۵ × ۳ = ۱۵

دودویی:
  ۱ ۰ ۱   (۵)
× ۰ ۱ ۱   (۳)
---------

مرحله ۱: ضرب در بیت راست (۱)
  ۱ ۰ ۱ × ۱ = ۱ ۰ ۱
  
مرحله ۲: ضرب در بیت وسط (۱)، شیفت به چپ ۱
  ۱ ۰ ۱ × ۱ = ۱ ۰ ۱، سپس شیفت → ۱ ۰ ۱ ۰
  
مرحله ۳: ضرب در بیت چپ (۰)، شیفت به چپ ۲
  ۱ ۰ ۱ × ۰ = ۰ ۰ ۰، سپس شیفت → ۰ ۰ ۰ ۰ ۰
  
مرحله ۴: جمع همه نتایج جزئی
    ۰ ۰ ۱ ۰ ۱   (۵)
  + ۰ ۱ ۰ ۱ ۰   (۱۰، شیفت داده شده)
  + ۰ ۰ ۰ ۰ ۰   (۰، شیفت داده شده)
  -----------
    ۰ ۱ ۱ ۱ ۱   (۱۵)

پاسخ: ۱۱۱۱₂ = ۱۵۱₀ ✓
```

### مثال ۲: ۶ × ۵

```
  ۱ ۱ ۰   (۶)
× ۱ ۰ ۱   (۵)
---------

نتایج جزئی:
  ۱ ۱ ۰ × ۱ = ۰ ۰ ۱ ۱ ۰   (موقعیت ۰)
  ۱ ۱ ۰ × ۰ = ۰ ۰ ۰ ۰ ۰   (موقعیت ۱، شیفت داده شده)
  ۱ ۱ ۰ × ۱ = ۰ ۱ ۱ ۰ ۰   (موقعیت ۲، شیفت داده شده)

جمع:
    ۰ ۰ ۱ ۱ ۰
  + ۰ ۰ ۰ ۰ ۰
  + ۰ ۱ ۱ ۰ ۰
  -----------
    ۱ ۰ ۰ ۰ ۱ ۱  (۶ + ۲۴ = ۳۰، اما صبر کنید...)
    
اجازه دهید دوباره بررسی کنم: ۶ × ۵ = ۳۰
۱ ۰ ۰ ۰ ۱ ۱ = ۳۲ + ۲ + ۱ = ۳۵... خطا!

تصحیح:
    ۰ ۰ ۱ ۱ ۰   (۶)
  + ۰ ۰ ۰ ۰ ۰   (۰)
  + ۱ ۱ ۰ ۰ ۰   (۲۴)
  -----------
    ۱ ۱ ۱ ۱ ۰   (۳۰)
    
۳۰ = ۱۶ + ۸ + ۴ + ۲ = ۱۱۱۱۰ ✓
```

### روش شیفت-و-جمع (نحوه کار کامپیوترها)

کامپیوترها از یک ترفند هوشمندانه استفاده می‌کنند:
- اگر بیت فعلی ۱ باشد، متن‌بند را جمع کنید
- اگر بیت فعلی ۰ باشد، چیزی اضافه نکنید
- همیشه به چپ شیفت کنید

```
الگوریتم برای A × B:
نتیجه = ۰
برای هر بیت در B (از راست به چپ):
    اگر بیت فعلی ۱ است:
        نتیجه = نتیجه + A
    A = A << ۱  (A را ۱ بیت به چپ شیفت دهید)
برگرداندن نتیجه
```

---

## تقسیم دودویی

### تقسیم طولانی در دودویی

تقسیم دودویی مثل تقسیم طولانی دهدهی است فقط با رقم‌های ۰ یا ۱.

### مثال ۱: ۱۵ ÷ ۳

```
دهدهی: ۱۵ ÷ ۳ = ۵

دودویی:
    ۱ ۰ ۱  (بخش‌پذیر = ۵)
   ------
۱ ۱ ) ۱ ۱ ۱ ۱  (۱۵ ÷ ۳)
      ۱ ۱      (۳ × ۱ = ۳، تفریق)
      ---
        ۰ ۱    (بردن بیت بعدی)
          ۰    (۳ در ۱ جا نمی‌شود، بیت ۰ = ۰)
          --
          ۰ ۱۱ (بردن بیت‌های بعدی)
           ۱ ۱ (۳ × ۱ = ۳، تفریق)
           ---
             ۰ (باقی‌مانده = ۰)

پاسخ: ۱۰۱₂ = ۵۱₀ ✓
```

### مثال ۲: ۲۰ ÷ ۴

```
    ۱ ۰ ۱  (بخش‌پذیر = ۵)
   ------
۱ ۰ ۰ ) ۱ ۰ ۱ ۰ ۰  (۲۰ ÷ ۴)
        ۱ ۰ ۰      (۴ × ۱ = ۴، تفریق)
        -----
          ۱ ۰ ۰    (بردن)
          ۱ ۰ ۰    (۴ × ۱ = ۴، تفریق)
          -----
              ۰    (باقی‌مانده = ۰)

صبر کنید، این ۲۰ ÷ ۴ = ۵ است، نه درست...

اجازه دهید دوباره انجام دهم:
    ۰ ۰ ۰ ۰ ۱ ۰ ۱  (۲۰ = ۱۰۱۰۰، ۴ = ۱۰۰)

در واقع، ۲۰ ÷ ۴:
۲۰ = ۱۰۱۰۰
۴  = ۰۰۱۰۰

    ۰ ۰ ۱ ۰ ۱  (۵)
   ------
۱ ۰ ۰ ) ۱ ۰ ۱ ۰ ۰
        ۱ ۰ ۰      (نمی‌توان از ۱ تفریق کرد، به ۱۰ بروید)
        
اجازه دهید درست تراز کنم:
        ۱ ۰ ۱
       ------
      ۱ ۰ ۰ ) ۱ ۰ ۱ ۰ ۰
            - ۱ ۰ ۰    (بیت ۲)
            ------
              ۰ ۰ ۱ ۰  (باقی‌مانده، بردن ۰)
                - ۰    (نمی‌توان تفریق کرد، بیت ۱ = ۰)
              -----
                ۰ ۱ ۰ ۰ (بردن ۰)
              -   ۱ ۰۰  (بیت ۰)
              -------
                    ۰

بخش‌پذیر: ۱۰۱ = ۵ ✓
```

### مثال ۳: ۲۱ ÷ ۵ (با باقی‌مانده)

```
۲۱ = ۱۰۱۰۱
۵  = ۰۰۱۰۱

    ۰ ۰ ۱ ۰ ۰  (۴، با باقی‌مانده)
   ------
۱ ۰ ۱ ) ۱ ۰ ۱ ۰ ۱
        ۱ ۰ ۱
        -----
          ۰ ۰ ۰ ۰  (نمی‌توان تفریق کرد)
            ۰ ۰ ۰ ۱ (نمی‌توان تفریق کرد)
              ۰ ۰ ۱ (باقی‌مانده = ۱)

۲۱ ÷ ۵ = ۴ باقی‌مانده ۱ ✓
```

---

## حالت خاص: ضرب/تقسیم بر توان‌های ۲

### راه سریع: از شیفت‌های بیت استفاده کنید!

این یکی از مهمترین ترفندها در محاسبات است.

**ضرب بر توان‌های ۲:**
```
ضرب در ۲:  x << ۱   (۱ بیت به چپ شیفت)
ضرب در ۴:  x << ۲   (۲ بیت به چپ شیفت)
ضرب در ۸:  x << ۳   (۳ بیت به چپ شیفت)
ضرب در ۱۶: x << ۴   (۴ بیت به چپ شیفت)
```

**مثال:**
```
۱۳ × ۸:
۱۳ = ۰۰۰۰۱۱۰۱
۱۳ << ۳ = ۰۱۱۰۱۰۰۰ = ۱۰۴ ✓
(۱۳ × ۸ = ۱۰۴)
```

**تقسیم بر توان‌های ۲:**
```
تقسیم بر ۲:  x >> ۱   (۱ بیت به راست شیفت)
تقسیم بر ۴:  x >> ۲   (۲ بیت به راست شیفت)
تقسیم بر ۸:  x >> ۳   (۳ بیت به راست شیفت)
```

**مثال:**
```
۱۰۰ ÷ ۴:
۱۰۰ = ۰۱۱۰۰۱۰۰
۱۰۰ >> ۲ = ۰۰۰۱۱۰۰۱ = ۲۵ ✓
(۱۰۰ ÷ ۴ = ۲۵)
```

### چرا شیفت‌ها سریع‌تر هستند

- **مدارهای ضرب/تقسیم** پیچیده و کند هستند
- **عملیات شیفت** در سخت‌افزار ساخته شده و در یک چرخه اجرا می‌شوند
- کامپایلرها به طور خودکار `× ۸` را با `<< ۳` جایگزین می‌کنند وقتی ممکن باشد

---

## کاربردهای عملی

### کاربرد ۱: محاسبات وضوح صفحه نمایش

محاسبه حافظه مورد نیاز برای یک صفحه:
```
۱۹۲۰ × ۱۰۸۰ پیکسل، ۴ بایت در هر پیکسل

محاسبه سریع:
۱۹۲۰ × ۱۰۸۰ × ۴
= ۱۹۲۰ × (۱۰۲۴ + ۵۶) × ۴  [۱۰۸۰ = ۱۰۲۴ + ۵۶]
= ۱۹۲۰ × ۱۰۲۴ × ۴ + ۱۹۲۰ × ۵۶ × ۴

با استفاده از شیفت:
۱۹۲۰ << ۱۰ = ۱۹۲۰ × ۱۰۲۴ = ۱,۹۶۶,۰۸۰
۱۹۲۰ × ۵۶ × ۴ = ۴۳۰,۰۸۰
مجموع: ~۲.۴ MB در هر صفحه
```

### کاربرد ۲: محاسبه آدرس حافظه

آرایه‌ها در حافظه:
```
آدرس پایه: 0x1000
هر عنصر: ۴ بایت
شاخص عنصر: n

آدرس = پایه + (n × ۴)
        = پایه + (n << ۲)  [سریعتر!]
```

### کاربرد ۳: تبدیل بین واحدهای ذخیره‌سازی

```
۱ KB = ۱۰۲۴ بایت = ۲^۱۰
۱ MB = ۱۰۲۴ KB = ۲^۲۰
۱ GB = ۱۰۲۴ MB = ۲^۳۰

برای یافتن تعداد KB در ۵۰۰۰ بایت:
۵۰۰۰ >> ۱۰ = ۵۰۰۰ ÷ ۱۰۲۴ ≈ ۴ KB
```

---

## تمرین‌های عملی

### تمرین ۱: ضرب دودویی
محاسبه کنید (کار خود را نشان دهید):

۱. ۴ × ۳ = _______
۲. ۷ × ۲ = _______
۳. ۵ × ۵ = _______
۴. ۶ × ۴ = _______

### تمرین ۲: تقسیم دودویی
محاسبه کنید (بخش‌پذیر و باقی‌مانده را نشان دهید):

۱. ۱۲ ÷ ۴ = _______
۲. ۱۵ ÷ ۲ = _______
۳. ۲۰ ÷ ۶ = _______
۴. ۳۱ ÷ ۵ = _______

### تمرین ۳: عملیات شیفت
با استفاده از شیفت‌های بیت محاسبه کنید:

۱. ۱۶ × ۴ = _______ (۱۶ << ؟)
۲. ۳۲ × ۸ = _______ (۳۲ << ؟)
۳. ۶۴ ÷ ۴ = _______ (۶۴ >> ؟)
۴. ۱۲۸ ÷ ۸ = _______ (۱۲۸ >> ؟)

### تمرین ۴: مسئله دنیای واقعی

**محاسبه حافظه گرافیکی:**
یک بازی نیاز دارد یک بافت ۵۱۲ × ۵۱۲ پیکسل را ذخیره کند، با هر پیکسل با استفاده از ۴ بایت (RGBA).

۱. حافظه کل مورد نیاز را (به بایت) محاسبه کنید
۲. با استفاده از شیفت‌های بیت به KB تبدیل کنید
۳. اگر ۸ بافت مانند این دارید، حافظه کل چقدر است؟

---

## اشتباهات رایج و نکات

### اشتباه ۱: فراموش کردن شیفت

```
اشتباه:
  ۱۰۱
× ۰۱۱
----
  ۱۰۱  (شیفت را فراموش کرد!)
  ۱۰۱
----
 ۱۰۱۰  (باید ۱۱۱۱ = ۱۵ باشد)

درست:
  ۱۰۱
× ۰۱۱
----
  ۱۰۱   (موقعیت ۰، بدون شیفت)
 ۱۰۱۰   (موقعیت ۱، شیفت ۱)
۰۰۰۰    (موقعیت ۲، شیفت ۲)
----
۱۱۱۱   (۵ + ۱۰ = ۱۵) ✓
```

### اشتباه ۲: تراز اشتباه تقسیم

همیشه مقسوم‌علیه را درست زیر مقسوم تراز کنید!

### نکته: بررسی با دهدهی

بعد از انجام حساب دودویی، برای بررسی پاسخ به دهدهی تبدیل کنید.

---

## نکات کلیدی

۱. **ضرب دودویی** ساده‌تر از دهدهی است (فقط ۰ و ۱ برای ضرب)
۲. **شیفت و جمع** نحوه کارآمد ضرب کامپیوترهاست
۳. **تقسیم طولانی** به همان شکل کار می‌کند، فقط با رقم‌های دودویی
۴. **توان‌های ۲ خاص هستند**: از شیفت‌های بیت برای ضرب/تقسیم فوری استفاده کنید
۵. **همیشه بررسی کنید**: برای بررسی پاسخ به دهدهی تبدیل کنید

## به یاد داشته باشید

| عملیات | روش دودویی | روش سریع |
|--------|-------------|----------|
| × ۲ | ضرب | << ۱ |
| × ۴ | ضرب | << ۲ |
| × ۸ | ضرب | << ۳ |
| ÷ ۲ | تقسیم | >> ۱ |
| ÷ ۴ | تقسیم | >> ۲ |
| ÷ ۸ | تقسیم | >> ۳ |

---

## گام‌های بعدی

- تمرین بیشتر مسائل ضرب و تقسیم
- یادگیری حساب اعشاری دودویی
- درک نحوه انجام عملیات حسابی توسط CPU
- بررسی الگوریتم‌های ضرب (الگوریتم بوث و غیره)
